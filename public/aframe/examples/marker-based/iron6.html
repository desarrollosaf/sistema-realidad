
<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image.prod.js"></script>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-aframe.prod.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
      /* background: black; */
    }

    a-scene, canvas {
      position: fixed !important;
      top: 0;
      left: 0;
      width: 100vw !important;
      height: 100vh !important;
      object-fit: cover;
      margin: 0;
      padding: 0;
      z-index: 0;
    }

    a-video {
      z-index: 1;
    }
  </style>
</head>
<body>
  <a-scene mindar-image="imageTargetSrc: {{ asset('ar/targets.mind') }}; autoStart: true;"
           embedded
           color-space="sRGB"
           renderer="colorManagement: true, physicallyCorrectLights"
           device-orientation-permission-ui="enabled: true">

    <a-assets>
      <video id="video1" src="{{ asset('ar/video1.mp4') }}" autoplay loop muted playsinline crossorigin="anonymous"></video>
      <video id="video2" src="{{ asset('ar/video2.mp4') }}" autoplay loop muted playsinline crossorigin="anonymous"></video>
      <video id="video3" src="{{ asset('ar/video3.mp4') }}" autoplay loop muted playsinline crossorigin="anonymous"></video>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
{{-- width="0.7" height="0.4" --}}
    <a-entity mindar-image-target="targetIndex: 0">
      <a-video src="#video3" width="0.9" height="1.6" position="0 0 0"></a-video>
    </a-entity>

    <a-entity mindar-image-target="targetIndex: 1">
      <a-video src="#video2" width="0.9" height="1.6" position="0 0 0"></a-video>
    </a-entity>

    <a-entity mindar-image-target="targetIndex: 2">
      <a-video src="#video1" width="0.9" height="1.6" position="0 0 0"></a-video>
    </a-entity>

  </a-scene>
  <script>
  window.addEventListener("load", function () {
    if (
      typeof DeviceMotionEvent !== "undefined" &&
      typeof DeviceMotionEvent.requestPermission === "function"
    ) {
      DeviceMotionEvent.requestPermission()
        .then((response) => {
          if (response === "granted") {
            console.log("Permiso concedido");
            // Puedes quitar o esconder un mensaje personalizado aquí si tuvieras uno
          }
        })
        .catch(console.error);
    }
  });
</script>
</body>
</html>
{{-- <!DOCTYPE html>
<html>
  <head>
    <title>3 Image Tracking con Video - AR.js</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
      <!-- Marcador 1 -->
      <a-nft
        type="nft"
        url="{{ asset('ar/marker1') }}"
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5">
        <a-video 
          src="#video1"
          width="1" height="0.6" 
          position="0 0 0"
          rotation="-90 0 0">
        </a-video>
      </a-nft>

      <!-- Marcador 2 -->
      <a-nft
        type="nft"
        url="{{ asset('ar/marker2') }}"
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5">
        <a-video 
          src="#video2"
          width="1" height="0.6" 
          position="0 0 0"
          rotation="-90 0 0">
        </a-video>
      </a-nft>

      <!-- Marcador 3 -->
      <a-nft
        type="nft"
        url="{{ asset('ar/marker3') }}"
        smooth="true"
        smoothCount="10"
        smoothTolerance="0.01"
        smoothThreshold="5">
        <a-video 
          src="#video3"
          width="1" height="0.6" 
          position="0 0 0"
          rotation="-90 0 0">
        </a-video>
      </a-nft>

      <!-- Cámara -->
      <a-entity camera></a-entity>
    </a-scene>

    <!-- Videos ocultos -->
    <video id="video1" src="{{ asset('ar/video1.mp4') }}" preload="auto" loop muted playsinline crossorigin="anonymous" style="display: none;"></video>
    <video id="video2" src="{{ asset('ar/video2.mp4') }}" preload="auto" loop muted playsinline crossorigin="anonymous" style="display: none;"></video>
    <video id="video3" src="{{ asset('ar/video3.mp4') }}" preload="auto" loop muted playsinline crossorigin="anonymous" style="display: none;"></video>

    <!-- Script para manejar reproducción -->
    <script>
      document.querySelectorAll('a-nft').forEach((nft, index) => {
        const video = document.getElementById(`video${index + 1}`);
        nft.addEventListener('markerFound', () => {
          video.play();
        });
        nft.addEventListener('markerLost', () => {
          video.pause();
          video.currentTime = 0;
        });
      });
    </script>
  </body>
</html> --}}